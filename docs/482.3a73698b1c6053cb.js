"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[482],{8482:(q,g,s)=>{s.r(g),s.d(g,{BooksComponent:()=>P});var _=s(6814),r=s(95),b=s(5047),d=s(8180),f=s(7523),h=s(2936),u=s(4946),k=s(4179);function C(o,l){if(1&o&&(u.TgZ(0,"option",16),u._uU(1),u.qZA()),2&o){const n=l.$implicit;u.Q6J("value",n.fullName),u.xp6(1),u.lnq(" ",n.surname," ",n.name," ",n.patronymic," ")}}function E(o,l){1&o&&(u.TgZ(0,"span"),u._uU(1,'\u041f\u043e\u043b\u0435 "\u0410\u0432\u0442\u043e\u0440" \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f'),u.qZA())}function v(o,l){if(1&o&&(u.TgZ(0,"div",17),u.YNc(1,E,2,0,"span",18),u.qZA()),2&o){const n=u.oxw();let e;u.xp6(1),u.Q6J("ngIf",null==(e=n.bookForm.get("author"))||null==e.errors?null:e.errors.required)}}function B(o,l){1&o&&(u.TgZ(0,"span"),u._uU(1,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),u.qZA())}function Z(o,l){1&o&&(u.TgZ(0,"span"),u._uU(1,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),u.qZA())}function T(o,l){1&o&&(u.TgZ(0,"span"),u._uU(1,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}function D(o,l){if(1&o&&(u.TgZ(0,"div",17),u.YNc(1,B,2,0,"span",18),u.YNc(2,Z,2,0,"span",18),u.YNc(3,T,2,0,"span",18),u.qZA()),2&o){const n=u.oxw();let e,t,a;u.xp6(1),u.Q6J("ngIf",null==(e=n.bookForm.get("name"))||null==e.errors?null:e.errors.required),u.xp6(1),u.Q6J("ngIf",null==(t=n.bookForm.get("name"))||null==t.errors?null:t.errors.minlength),u.xp6(1),u.Q6J("ngIf",null==(a=n.bookForm.get("name"))||null==a.errors?null:a.errors.maxlength)}}function x(o,l){1&o&&(u.TgZ(0,"span"),u._uU(1,"\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),u.qZA())}function F(o,l){1&o&&(u.TgZ(0,"span"),u._uU(1,"\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"),u.qZA())}function I(o,l){1&o&&(u.TgZ(0,"span"),u._uU(1,"\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0442\u044c 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),u.qZA())}function O(o,l){if(1&o&&(u.TgZ(0,"div",17),u.YNc(1,x,2,0,"span",18),u.YNc(2,F,2,0,"span",18),u.YNc(3,I,2,0,"span",18),u.qZA()),2&o){const n=u.oxw();let e,t,a;u.xp6(1),u.Q6J("ngIf",null==(e=n.bookForm.get("publisher"))||null==e.errors?null:e.errors.required),u.xp6(1),u.Q6J("ngIf",null==(t=n.bookForm.get("publisher"))||null==t.errors?null:t.errors.minlength),u.xp6(1),u.Q6J("ngIf",null==(a=n.bookForm.get("publisher"))||null==a.errors?null:a.errors.maxlength)}}function A(o,l){if(1&o&&(u.TgZ(0,"div",17),u._uU(1),u.qZA()),2&o){const n=u.oxw();let e;u.xp6(1),u.hij(" ",null==(e=n.bookForm.get("year"))||null==e.errors?null:e.errors.year," ")}}function M(o,l){if(1&o&&(u.TgZ(0,"span",17),u._uU(1),u.qZA()),2&o){const n=u.oxw();u.xp6(1),u.Oqu(n.message)}}const N=function(){return[]};function U(o,l){return n=>{if(!n.value)return null;const e=parseInt(n.value,10);return!isNaN(e)&&e>=o&&e<=l?null:{year:`\u0413\u043e\u0434 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0435\u0436\u0434\u0443 ${o} \u0438 ${l}`}}}let P=(()=>{class o{constructor(n,e){this.dataService=n,this.cdr=e,this.tableTitle="\u041a\u043d\u0438\u0433\u0438",this.bookHeaders=[{name:"id",title:"ID",sort:"off"},{name:"author",title:"\u0410\u0432\u0442\u043e\u0440",sort:"none"},{name:"name",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",sort:"off"},{name:"publisher",title:"\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e",sort:"none"},{name:"year",title:"\u0413\u043e\u0434 \u0438\u0437\u0434\u0430\u043d\u0438\u044f",sort:"none"}],this.authors=[],this.message="",this.books$=this.dataService.books$,this.bookForm=new r.cw({author:new r.NI("",{validators:[r.kI.required],nonNullable:!0}),name:new r.NI("",{validators:[r.kI.required,r.kI.minLength(2),r.kI.maxLength(50)],nonNullable:!0}),publisher:new r.NI("",{validators:[r.kI.required,r.kI.minLength(2),r.kI.maxLength(50)],nonNullable:!0}),year:new r.NI("",{validators:[r.kI.required,U(1900,(new Date).getFullYear())],nonNullable:!0})})}ngOnInit(){this.dataService.authors$.pipe((0,d.q)(1)).subscribe(n=>{this.authors=n.map(e=>({...e,fullName:`${e.surname} ${e.name} ${e.patronymic}`}))})}onSubmit(){if(this.bookForm.valid){const n=this.bookForm.value;this.dataService.books$.pipe((0,d.q)(1)).subscribe(e=>{const a={id:this.getNextId(e),name:n.name,author:n.author,publisher:n.publisher,year:n.year};this.dataService.addBook(a),this.bookForm.reset()})}else this.showMessage("\u0424\u043e\u0440\u043c\u0430 \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u0430")}getNextId(n){return 0===n.length?1:Math.max(...n.map(t=>t.id))+1}showMessage(n){this.message=n,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},3e3)}static#u=this.\u0275fac=function(e){return new(e||o)(u.Y36(k.D),u.Y36(u.sBO))};static#o=this.\u0275cmp=u.Xpm({type:o,selectors:[["app-books"]],standalone:!0,features:[u._Bn([(0,f.e$)()]),u.jDz],decls:36,vars:13,consts:[[1,"book-input__wrapper"],[1,"book-input"],[3,"formGroup","ngSubmit"],[1,"book-input__row"],[1,"book-input__form-field"],["formControlName","author","id","author",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],[1,"book-input__control"],["trimInput","","formControlName","name","placeholder","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","type","text",1,"form-control"],[1,"book-input__form-control"],["trimInput","","formControlName","publisher","placeholder","\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e","type","text",1,"form-control"],["formControlName","year","placeholder","\u0413\u0413\u0413\u0413","type","text","mask","0000",1,"form-control"],["type","submit",1,"book-input__btn","button"],[3,"tableTitle","headers","items"],[3,"value"],[1,"error-message"],[4,"ngIf"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0)(1,"div",1)(2,"form",2),u.NdJ("ngSubmit",function(){return t.onSubmit()}),u.TgZ(3,"div",3)(4,"div",4)(5,"label"),u._uU(6,"\u0410\u0432\u0442\u043e\u0440"),u.qZA(),u.TgZ(7,"select",5)(8,"option",6),u._uU(9,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430"),u.qZA(),u.YNc(10,C,2,4,"option",7),u.qZA(),u.YNc(11,v,2,1,"div",8),u.qZA(),u.TgZ(12,"div",4)(13,"label"),u._uU(14,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),u.qZA(),u.TgZ(15,"div",9),u._UZ(16,"input",10),u.YNc(17,D,4,3,"div",8),u.qZA()()(),u.TgZ(18,"div",3)(19,"div",4)(20,"label"),u._uU(21,"\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e"),u.qZA(),u.TgZ(22,"div",11),u._UZ(23,"input",12),u.YNc(24,O,4,3,"div",8),u.qZA()(),u.TgZ(25,"div",4)(26,"label"),u._uU(27,"\u0413\u043e\u0434 \u0438\u0437\u0434\u0430\u043d\u0438\u044f"),u.qZA(),u.TgZ(28,"div",9),u._UZ(29,"input",13),u.YNc(30,A,2,1,"div",8),u.qZA()()(),u.TgZ(31,"button",14),u._uU(32,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"),u.qZA(),u.YNc(33,M,2,1,"span",8),u.qZA()()(),u._UZ(34,"app-table",15),u.ALo(35,"async")),2&e){let a,p,m,i,c;u.xp6(2),u.Q6J("formGroup",t.bookForm),u.xp6(8),u.Q6J("ngForOf",t.authors),u.xp6(1),u.Q6J("ngIf",(null==(a=t.bookForm.get("author"))?null:a.touched)&&(null==(a=t.bookForm.get("author"))?null:a.errors)),u.xp6(6),u.Q6J("ngIf",(null==(p=t.bookForm.get("name"))?null:p.touched)&&(null==(p=t.bookForm.get("name"))?null:p.errors)),u.xp6(7),u.Q6J("ngIf",(null==(m=t.bookForm.get("publisher"))?null:m.touched)&&(null==(m=t.bookForm.get("publisher"))?null:m.errors)),u.xp6(6),u.Q6J("ngIf",(null==(i=t.bookForm.get("year"))?null:i.touched)&&(null==(i=t.bookForm.get("year"))||null==i.errors?null:i.errors.year)),u.xp6(3),u.Q6J("ngIf",t.message),u.xp6(1),u.Q6J("tableTitle",t.tableTitle)("headers",t.bookHeaders)("items",null!==(c=u.lcZ(35,10,t.books$))&&void 0!==c?c:u.DdM(12,N))}},dependencies:[_.ez,_.sg,_.O5,_.Ov,b.a,r.u5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.UX,r.sg,r.u,f.Z6,h.S],styles:['@charset "UTF-8";.book-input__wrapper[_ngcontent-%COMP%]{padding:10px}.book-input__wrapper[_ngcontent-%COMP%]   .book-input__row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.book-input__wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{display:block;height:22px}.book-input__wrapper[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:.8em;margin-top:5px}.book-input__wrapper[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]:before{content:"\\26a0  "}.book-input__wrapper[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{height:30px;padding:0 20px;margin:0 auto;border-radius:100px;cursor:pointer}.book-input__wrapper[_ngcontent-%COMP%]   .book-input__btn[_ngcontent-%COMP%]{margin-right:20px}'],changeDetection:0})}return o})()}}]);